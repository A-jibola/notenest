<div class="max-w-4xl mx-auto p-6 bg-white " style="color: var(--text-color)">
  <h1 class="text-3xl font-bold mb-4"><%= @note.title %></h1>

  <p class="mb-6 text-lg"><%= simple_format(@note.description.to_s) %></p>

  <div class="mb-4">
    <h2 class="text-xl font-semibold mb-2">Tags</h2>
    <div class="flex flex-wrap gap-2">
      <% if @note.tags.any? %>
        <% @note.tags.each do |tag| %>
          <span class="px-3 py-1 rounded-full text-sm" style="background-color: var(--secondary-color);">
            <%= tag.name %>
          </span>
        <% end %>
      <% else %>
        <span class="text-sm italic">No tags assigned</span>
      <% end %>
    </div>
  </div>

  <div class="mb-6">
    <p><strong>Status:</strong> <%= @note.status %></p>
    <p><strong>Due Date:</strong> <%= @note.due_date.presence || 'No due date set' %></p>
  </div>

  <div>
    <h2 class="text-xl font-semibold mb-3">Steps</h2>
    <% if @note.steps.any? %>
      <div class="space-y-2">
        <% @note.steps.each do |step| %>
          <details class="rounded-lg border border-gray-300 p-4 bg-white shadow-sm">
            <summary class="font-medium cursor-pointer flex justify-between items-center">
              <span><%= step.name %> <span class="text-xs ml-2 px-2 py-1 rounded" style="background-color: var(--accent-color);"><%= step.status %></span></span>
              <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </summary>
            <div class="mt-3 text-sm space-y-2">
              <p><strong>Summary:</strong> <%= step.summary.presence || 'N/A' %></p>
              <p><strong>Details:</strong> <%= simple_format(step.details.to_s) %></p>
              <p><strong>Due Date:</strong> <%= step.due_date.presence || 'Not set' %></p>
              <p><strong>Reminder At:</strong> <%= step.reminder_at.presence || 'No reminder set' %></p>
            </div>
          </details>
        <% end %>
      </div>
    <% else %>
      <p class="italic text-gray-600">No steps added yet.</p>
    <% end %>
  </div>

  <div class="flex gap-4 mt-8">
    <%= link_to 'Edit Note', edit_note_path(@note), class: "px-4 py-2 rounded-lg text-white shadow" , style: "background-color: var(--dark-color);" %>
    <%= link_to 'Back to Notes', notes_path, class: "px-4 py-2 rounded-lg border border-gray-400 text-gray-700" %>
  </div>
</div>
